<!--
 Copyright (c) 2025 Green Wave Team
 
 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->

---
sidebar_position: 2
title: TrafficEnvironmentImpact
---

# TrafficEnvironmentImpact

## Entity Description

The `TrafficEnvironmentImpact` entity describes the environmental impact of traffic conditions, specifically focusing on emissions like CO2 generated by vehicles on a road segment.

### JSON Structure

A typical `TrafficEnvironmentImpact` entity in NGSI-LD format looks like this:

```json
{
  "id": "urn:ngsi-ld:TrafficEnvironmentImpact:001",
  "type": "TrafficEnvironmentImpact",
  "co2": {
    "type": "Property",
    "value": 120.5
  },
  "traffic": {
    "type": "Property",
    "value": [
      {
        "vehicleClass": "car",
        "refTrafficFlowObserved": "urn:ngsi-ld:TrafficFlowObserved:Flow-01"
      }
    ]
  },
  "refRoadSegment": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:RoadSegment:Segment-A"
  },
  "dateObservedFrom": {
    "type": "Property",
    "value": "2023-10-01T08:00:00Z"
  },
  "dateObservedTo": {
    "type": "Property",
    "value": "2023-10-01T09:00:00Z"
  }
}
```

### Key Fields

- **id**: Unique identifier for the entity.
- **type**: Entity type, must be `TrafficEnvironmentImpact`.
- **co2**: The measured or calculated CO2 emission concentration.
- **traffic**: A list of traffic items, detailing vehicle classes and references to traffic flow observations.
- **refRoadSegment**: A relationship link to the `RoadSegment` where this impact is measured.
- **dateObservedFrom / dateObservedTo**: The time range for the observation.

## Smart Data Models

This data model is compliant with the [Smart Data Models](https://smart-data-models.github.io/dataModel.Environment/TrafficEnvironmentImpact/) standard. It extends the standard model to include specific relationships like `refRoadSegment` for better context integration.

## Application

### Data Validation

Validation via `openAPI/smartmodels.yaml` ensures:

- **Structure**: The `traffic` field must be an array of objects with valid `vehicleClass` and references.
- **Types**: `co2` must be a floating-point number.

### Documentation

For developers:

- **Backend**: Provides a clear schema for calculating and storing environmental impact data derived from traffic simulations or sensors.
- **Frontend**: Enables the visualization of "green" vs. "polluted" routes on a map by querying impacts linked to road segments.

### Uniqueness & Linked Data

- **Uniqueness**: Terms like `co2` and `vehicleClass` are semantically defined in the JSON-LD context (`fiware:co2`, `fiware:vehicleClass`).
- **Linked Data**: The `refRoadSegment` connects environmental data directly to the physical infrastructure. This allows the system to answer questions like "Which road segments have the highest CO2 emissions during rush hour?"

### Intelligent Query Support

- **Impact Analysis**: "Find all road segments where CO2 emissions exceeded 100 units in the last hour."
- **Cross-Domain Queries**: Combine traffic flow data with environmental impact to optimize traffic light timings for reduced emissions.
